jQuery.fn.jMyChampolion=function(a){var b={mediaSelector:".sounds div.sound",matchSelector:".match.selectable",soundHelpSelector:".matches div.sound",slideSelector:".matches .slide",soundAutoPlay:!0,donut:{width:300,height:300,text_y:".30em",duration:500,transition:200,thickness:35},onNextSound:function(a,b){l(a,b)},onBeforeInit:function(){h()},onAfterInit:function(){i()},onAfterClickMatchCorrect:function(a){u(a)},onAfterClickMatchIncorrect:function(a){v(a)},onLoaded:function(){j()},onFinish:function(){n()}},c=$.extend({},b,a),d=null,e=null,f=0,g=0,h=function(){x(),$(c.slideSelector,e).hide(),$(c.slideSelector+":first",e).show(),f=1,g=$(c.slideSelector,e).length,r(),$(e).cofPlayer({mediaSelector:c.soundHelpSelector,loader:{size:200,container:e,onLoaded:c.onLoaded}})},i=function(){$(c.mediaSelector+":first").hide()},j=function(){t($(c.mediaSelector+":first"),function(){k()})},k=function(){c.soundAutoPlay&&setTimeout(function(){$(c.mediaSelector+":eq("+(f-1)+")").cofPlay()},500)},l=function(a){var b=null;for(var d in c.answers)d==a.attr("id")&&(b=$("#"+c.answers[d]));var e=$(".top",b).offset().left-$("a",a).offset().left,g=$(".top",b).offset().top-$("a",a).offset().top;$("a",a).animate({left:"+="+e,top:"+="+g},800,function(){y(f+1,500)})},m=function(a){return a.parent().hasClass("disabled")||a.parent().hasClass("active")?!1:(y(parseInt(a.text()),500),d.progress=parseInt(a.text()),!1)},n=function(){$(".matches").hide(),$(".help").hide(),$(".paginator").hide(),$(".sounds").hide()},o=function(a){for(var b="<ul>",c=1;a>=c;c++)b+='<li class="'+(1==c?"active":"disabled")+'"><a href="#jmc-'+c+'">'+c+"</a></li>";return b+="</ul>"},p=function(){return'<div class="error"></div>'},q=function(){return'<div class="success"></div>'},r=function(){$(".paginator").html(o(g)),$(".paginator ul li a").click(function(){m($(this))})},s=function(){var a=1;$(".paginator ul li").each(function(){$(this).removeClass("active passed disabled"),$(this).addClass(f>a?"passed":a==f?"active":"disabled"),a++})},t=function(a,b){$("a",a).css("top","-50px"),$(a).show(),$("a",a).animate({top:0},400,b)},u=function(a){a.closest(".image").prepend(q())},v=function(a){a.closest(".image").prepend(p()),setTimeout(function(){$(".error",a.closest(".image")).remove()},1e3)},w=function(a){$(c.mediaSelector+":eq("+(a-1)+")").find("a").attr("style",""),$(c.slideSelector+":eq("+(a-1)+") .match.success").removeClass("success").find("div.success").remove()},x=function(){var a=p();$(".match .image:first",e).append($(a).hide());var b=q();$(".match .image:first",e).append($(b).hide())},y=function(a,b){var d=$(c.mediaSelector+":eq("+(f-1)+")"),e=$(c.mediaSelector+":eq("+(a-1)+")");w(a),setTimeout(function(){$(c.slideSelector+":eq("+(f-1)+")").animate({opacity:0},500,function(){$(this).hide(),$(c.slideSelector+":eq("+(a-1)+")").css("opacity","1").show(),t(e,function(){k()}),d.hide()}),f=a,s()},b)},z=function(a){e=a,d=$(a).jHearNClick(c)};return this.each(function(){var a=$(this);return z(a),$(this)})};